{% extends "::base.html.twig" %}

{% block title %}{{ book.title }}{% endblock %}

{% block body %}

    <img src="{{ asset('uploads/pictures/') ~ book.picture }}" width="200" height="200">

    {#<h2>{{ book.title }}</h2>#}

    {#<p>Author: {{ book.bookAuthor }}</p>#}
    {#<p>Publish date: {{ book.yearPublished|date('d/m/y') }}</p>#}


    {#<p><small>By {{ book.submittedBy }} </small><a href="{{ path('blogger_book_edit', {'id': book.id}) }}">edit</a></p>#}

    {#<a href="{{ path('blogger_post_create', {'bookId': book.id }) }}">Review this book</a>#}

    {#<hr>#}

    <table class="table">
        <thead>
        <tr>
            <th scope="col"><h2>{{ book.title }}</h2></th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th scope="row">Author:</th>
            <td>{{ book.bookAuthor }}</td>
        </tr>
        <tr>
            <th scope="row">Publish date:</th>
            <td>{{ book.yearPublished|date('d/m/y') }}</td>
        </tr>

        {% if book.submittedBy == app.user %}

        <tr>
            <th scope="row">Edit post:</th>
            <td><a href="{{ path('blogger_book_edit', {'id': book.id}) }}">{{ book.submittedBy }}</a></td>
        </tr>

        {% endif %}

        {#<tr>#}
            {#<th scope="row"><a href="{{ path('blogger_post_create', {'bookId': book.id }) }}">Review this book</a></th>#}
            {#<td>{{ book.yearPublished|date('d/m/y') }}</td>#}
        {#</tr>#}
        </tbody>
    </table>

    <a href="{{ path('blogger_post_create', {'bookId': book.id }) }}">Review this book</a>

    <hr>

    <h3>Reviews</h3>

    {% if book.posts %}
        {% for post in book.posts %}

            <hr>
            <h4>{{ post.title }}</h4>

            <p>{{ post.content }}</p>

            {% if post.like %}
                <p><strong>Thoughts:</strong> Loved it!</p>
            {% else %}
                <p><strong>Thoughts:</strong> Hated it!</p>
            {% endif %}

            <p><small>By <a href="{{ path('blogger_stranger', {'id': post.user.id }) }}">{{ post.user }}</a> on {{ post.published|date('H:i d/m/y') }}</small></p>



        {% endfor %}
    {% endif %}

{% endblock %}


